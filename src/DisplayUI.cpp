#include "DisplayUI.h"
#include <Wire.h>
#include <Fonts/FreeSans9pt7b.h>

namespace
{
    Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

    // Bitmaps taken from the provided sketch
    
    static const unsigned char PROGMEM logoBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x07,0xff,0xf8,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x7f,0xff,0xff,0xc0,0x00,0x00,0x00,0x00,0x02,0x00,0x20,0x00,0x00,0x00,0x00,0x01,0xff,0xff,0xff,0xe0,0x00,0x00,0x00,0x00,0x01,0x00,0x40,0x00,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x00,0x01,0x00,0x40,0x00,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x01,0x00,0x40,0x00,0x00,0x00,0x00,0x1f,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x07,0xff,0xf0,0x00,0x00,0x00,0x00,0x3f,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x18,0x00,0x08,0x00,0x00,0x00,0x00,0x7f,0xff,0xff,0xff,0xff,0x80,0x00,0x00,0x00,0x13,0x80,0x04,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xff,0xff,0xc0,0x00,0x00,0x00,0x24,0x00,0x02,0x00,0x00,0x00,0x01,0xff,0xff,0xff,0xff,0xff,0xe0,0x00,0x00,0x00,0x28,0x00,0x02,0x00,0x00,0x00,0x01,0xff,0xff,0xff,0xff,0xff,0xe0,0x00,0x00,0x00,0x28,0x00,0x02,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x28,0x00,0x02,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x28,0x00,0x02,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x20,0x00,0x02,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x20,0x00,0x02,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x3f,0xff,0xfe,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0x1f,0x7e,0xfc,0xfc,0x3c,0x06,0x0f,0xe0,0xf0,0x0c,0x07,0x0f,0xe7,0xc7,0xc0,0x1c,0x0e,0x3c,0x7c,0xf8,0x0c,0x06,0x0f,0xf3,0xfc,0x1c,0x1f,0x9f,0xe7,0xc7,0xe0,0x3c,0xee,0x18,0x78,0x79,0xcf,0x1f,0x03,0x87,0x9c,0x1e,0x18,0x83,0x86,0x06,0x70,0x3c,0xfe,0x18,0x78,0x79,0xcf,0x1f,0x01,0x86,0x0e,0x1e,0x18,0x03,0x06,0x06,0x30,0x3c,0x7e,0x00,0x7a,0x79,0xcf,0x1f,0x01,0x86,0x06,0x36,0x1e,0x03,0x07,0xc6,0x70,0x3c,0x0e,0x42,0x73,0x38,0x0f,0x1f,0x01,0x8e,0x06,0x37,0x1f,0x83,0x07,0xc7,0xe0,0x3f,0x86,0x66,0x73,0x38,0x1f,0x1f,0x01,0x8e,0x06,0x73,0x07,0xc3,0x06,0x07,0xc0,0x3f,0xe6,0x76,0x60,0x19,0x9f,0x1f,0x01,0x86,0x06,0x7f,0x00,0xc3,0x06,0x06,0xe0,0x3f,0xe6,0x7e,0x60,0x19,0x8f,0x1f,0x01,0x87,0x0e,0x7f,0x90,0xc3,0x06,0x06,0x60,0x3c,0x06,0x7e,0x67,0x99,0xcf,0x1f,0x01,0x83,0xfc,0xe1,0x9f,0xc3,0x07,0xe6,0x70,0x1c,0x0e,0x7e,0x47,0x89,0xc7,0x1f,0x01,0x81,0xf8,0xc1,0x9f,0x83,0x07,0xe6,0x30,0x1f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xff,0xff,0xff,0xff,0xff,0xe0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xff,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7f,0xff,0xff,0xff,0xff,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7f,0xff,0xff,0xff,0xff,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3f,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xff,0xff,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3f,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM selectBit[] = {0x7f,0xfe,0xff,0xff,0xff,0xef,0xff,0xe7,0xc0,0x03,0xff,0xe7,0xff,0xef,0xff,0xff,0x7f,0xfe};

    static const unsigned char PROGMEM barGraphBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xc0,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x00,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfe,0x00,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM toasterBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xff,0xe0,0x00,0x00,0x0c,0x00,0x30,0x00,0x00,0x10,0x00,0x18,0x00,0x00,0x30,0x00,0x08,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x30,0x00,0x08,0x00,0x00,0x10,0x00,0x18,0x00,0x00,0x18,0x00,0x10,0x00,0x00,0x18,0x00,0x10,0x00,0x00,0x18,0x00,0x10,0x00,0x00,0x18,0x00,0x10,0x00,0x00,0x18,0x00,0x10,0x00,0x00,0xff,0xff,0xfe,0x00,0x01,0x80,0x00,0x03,0x80,0x03,0x0e,0x00,0x00,0xc0,0x06,0x3e,0x00,0x00,0x40,0x04,0x40,0x00,0x00,0x60,0x04,0x80,0x00,0x00,0x20,0x0c,0x80,0x00,0x00,0x20,0x0c,0x80,0x00,0x00,0x20,0x0c,0x80,0x00,0x00,0x30,0x0c,0x80,0x00,0x00,0x30,0x0c,0x80,0x00,0x00,0x30,0x0c,0x80,0x00,0x00,0x20,0x0c,0x00,0x00,0x00,0x20,0x0c,0x00,0x00,0x00,0x20,0x0c,0x00,0x00,0x00,0x20,0x1f,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM weightBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x80,0x00,0x00,0x00,0x3b,0x80,0x00,0x00,0x00,0x7b,0xd8,0x00,0x00,0x00,0x3d,0xe8,0x00,0x00,0x00,0x1e,0xe0,0x00,0x00,0x00,0x1e,0xf0,0x00,0x00,0x00,0x0f,0x78,0x00,0x00,0x00,0x07,0xb8,0x00,0x00,0x00,0x17,0xb8,0x00,0x00,0x00,0x33,0xd8,0x00,0x01,0x80,0x7b,0xe0,0x00,0x03,0xc1,0xf1,0xe0,0x00,0x01,0xe3,0xc0,0xf0,0x00,0x01,0xe7,0x80,0xe0,0x00,0x00,0xf7,0x00,0x40,0x00,0x06,0x78,0x00,0x00,0x00,0x07,0x78,0x00,0x00,0x00,0x07,0xbc,0x00,0x00,0x00,0x03,0x9e,0x00,0x00,0x00,0x03,0xde,0x00,0x00,0x00,0x05,0xef,0x00,0x00,0x00,0x04,0xef,0x00,0x00,0x00,0x02,0xf7,0x80,0x00,0x00,0x00,0x63,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM colourBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x80,0x00,0x00,0x1f,0xe0,0x00,0x00,0x1f,0xf8,0x00,0x07,0xdc,0xfe,0x00,0x0f,0xfc,0x7f,0x00,0x1f,0xff,0xff,0x00,0x1f,0xff,0xf1,0x80,0x1f,0xff,0xe0,0x80,0x1f,0xff,0xe1,0xc0,0x1f,0xff,0xff,0xc0,0x1f,0xdf,0xff,0xc0,0x1f,0x8f,0xff,0xc0,0x0f,0x1f,0xff,0xc0,0x0f,0x3f,0xff,0x80,0x07,0xff,0xff,0x80,0x03,0xff,0xff,0x00,0x00,0xff,0xfc,0x00,0x00,0x3f,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM refinedColourBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xe0,0x20,0x00,0x70,0x1c,0x00,0x01,0x80,0xe3,0x00,0x02,0x01,0xf1,0x80,0x04,0x63,0xf0,0xc0,0x08,0xf3,0xf8,0x40,0x11,0xf9,0xf8,0x40,0x31,0xf9,0xf0,0xc0,0x21,0xf8,0xe1,0x80,0x60,0xf8,0x01,0x00,0x60,0x70,0x01,0x00,0x60,0x00,0x01,0x20,0x60,0x00,0x00,0xa0,0x67,0x80,0x00,0x60,0x6c,0x40,0x00,0x60,0x68,0x40,0x00,0x60,0x7c,0x40,0x1f,0xe0,0x36,0xc0,0x1f,0xe0,0x3b,0x8f,0x21,0xe0,0x18,0x1f,0xa0,0xe0,0x1c,0x1f,0xa0,0xe0,0x0e,0x1f,0x90,0xe0,0x07,0x1f,0x9f,0xe0,0x03,0xcf,0x00,0xe0,0x01,0xf8,0x03,0xe0,0x00,0x7f,0xff,0xe0,0x00,0x1f,0xfc,0xe0,0x00,0x00,0x00,0xc0};

    static const unsigned char PROGMEM image_arrow_curved_down_left_bits[] = {0x20,0x10,0x10,0x18,0xb8,0xf0,0xe0,0xf0};
    static const unsigned char PROGMEM image_download_bits[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xc0,0x00,0x00,0x18,0x00,0x60,0x00,0x00,0x30,0x00,0x10,0x00,0x00,0x20,0x00,0x18,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x20,0x00,0x18,0x00,0x00,0x30,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x30,0x00,0x00,0xff,0xff,0xfe,0x00,0x03,0x80,0x00,0x03,0x00,0x06,0x1e,0x00,0x01,0x80,0x04,0x7e,0x00,0x00,0xc0,0x0c,0xc0,0x00,0x00,0x40,0x08,0x80,0x00,0x00,0x60,0x09,0x80,0x00,0x00,0x60,0x09,0x00,0x00,0x00,0x60,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x1f,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
    static const unsigned char PROGMEM image_OLED_Screens__Smart_Toaster__10__bits[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0xc0,0x00,0x00,0x18,0x00,0x60,0x00,0x00,0x30,0x00,0x10,0x00,0x00,0x20,0x00,0x18,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x20,0x00,0x08,0x00,0x00,0x20,0x00,0x18,0x00,0x00,0x30,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x30,0x00,0x00,0xff,0xff,0xfe,0x00,0x03,0x80,0x00,0x03,0x00,0x06,0x1e,0x00,0x01,0x80,0x04,0x7e,0x00,0x00,0xc0,0x0c,0xc0,0x00,0x00,0x40,0x08,0x80,0x00,0x00,0x60,0x09,0x80,0x00,0x00,0x60,0x09,0x00,0x00,0x00,0x60,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x70,0x09,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x08,0x00,0x00,0x00,0x60,0x1f,0xff,0xff,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM sensorsBit[] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x2c,0x00,0x07,0xff,0x76,0x00,0x07,0xff,0x76,0x00,0x07,0xf3,0x36,0x00,0x07,0xf3,0x36,0x00,0x07,0xff,0x36,0x00,0x07,0xff,0x76,0x00,0x00,0x00,0x6e,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

    static const unsigned char PROGMEM temperatureBit[] = {0x1c,0x00,0x22,0x02,0x2b,0x05,0x2a,0x02,0x2b,0x38,0x2a,0x60,0x2b,0x40,0x2a,0x40,0x2a,0x60,0x49,0x38,0x9c,0x80,0xae,0x80,0xbe,0x80,0x9c,0x80,0x41,0x00,0x3e,0x00};

    static const unsigned char PROGMEM clickIcon[] = {0x00,0x00,0x80,0xc0,0xe0,0xf0,0xf8,0xfc,0xfe,0xf0,0xd8,0x98,0x0c,0x08,0x00,0x00};

    constexpr uint8_t selectToggleY[3] = {24, 36, 48};
    constexpr uint8_t yesNoToggleX[2] = {54, 96};

    inline int clampIndex(int idx, int max)
    {
        if (idx < 0) return 0;
        if (idx > max) return max;
        return idx;
    }
}

namespace DisplayUI
{

    bool begin()
    {
        Wire.begin(OLED_SDA_PIN, OLED_SCL_PIN);
        Wire.setClock(100000);

        if (!display.begin(SSD1306_SWITCHCAPVCC, OLED_ADDR))
        {
            return false;
        }

        display.clearDisplay();
        display.setTextColor(SSD1306_WHITE);
        display.setTextSize(1);
        display.setTextWrap(false);
        display.display();
        return true;
    }

    Adafruit_SSD1306 &getDisplay()
    {
        return display;
    }

    void showInitError(const __FlashStringHelper *msg)
    {
        display.clearDisplay();
        display.setCursor(0, 0);
        display.setTextSize(1);
        display.println(msg);
        display.display();
    }

    void showSplash()
    {
        display.clearDisplay();
        display.drawBitmap(0, -1, logoBit, 128, 64, 1);
        display.display();
    }

    void showModeSelection(int selectionIndex)
    {
        selectionIndex = clampIndex(selectionIndex, 2);

        display.clearDisplay();

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setFont(&FreeSans9pt7b);
        display.setCursor(14, 17);
        display.print(F("Select Mode"));

        display.setFont();
        display.setCursor(23, 25);
        display.print(F("Toast"));

        display.setCursor(23, 37);
        display.print(F("Sensor Showcase"));

        display.setCursor(23, 49);
        display.print(F("Logo"));

        display.drawBitmap(3, selectToggleY[selectionIndex], selectBit, 16, 9, 1);

        display.display();
    }

    void showSensorShowcase(float tempC,
                            float weightGrams,
                            uint8_t r8,
                            uint8_t g8,
                            uint8_t b8,
                            float brightness)
    {
        display.clearDisplay();

        display.drawLine(0, 12, 127, 12, 0);
        display.drawRect(0, 1, 127, 63, 1);
        display.drawLine(64, 1, 64, 62, 1);
        display.drawLine(0, 32, 126, 32, 1);

        display.setTextColor(1);
        display.setTextWrap(false);

        display.drawBitmap(43, 9, temperatureBit, 16, 16, 1);
        display.drawBitmap(-2, 32, weightBit, 34, 35, 1);
        display.drawBitmap(99, 0, refinedColourBit, 27, 31, 1);
        display.drawBitmap(62, 30, sensorsBit, 26, 22, 1);

        display.setCursor(89, 37);
        display.print(F("SENSOR"));
        display.setCursor(77, 51);
        display.print(F("SHOWCASE"));

        display.setCursor(67, 5);
        display.printf("R:%u", r8);
        display.setCursor(67, 14);
        display.printf("G:%u", g8);
        display.setCursor(67, 23);
        display.printf("B:%u", b8);

        display.setCursor(7, 14);
        display.printf("%.1f", tempC);

        display.setCursor(28, 40);
        display.printf("%.2fKG", weightGrams / 1000.0f);

        display.setCursor(34, 51);
        display.printf("%.1f%%", brightness * 100.0f);

        display.display();
    }

    void showToastingProcess(float progress01)
    {
        if (progress01 < 0.0f)
            progress01 = 0.0f;
        if (progress01 > 1.0f)
            progress01 = 1.0f;

        display.clearDisplay();

        display.drawBitmap(68, 3, toasterBit, 40, 32, 1);
        display.drawBitmap(15, 31, barGraphBit, 98, 31, 1);

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setCursor(21, 24);
        display.print(F("TOASTING"));

        const int barXStart = 22;
        const int barWidth = 6;
        const int barHeight = 17;
        const int barStep = 8;
        const int barCount = 10;

        int lit = 1 + static_cast<int>(progress01 * (barCount - 1) + 0.5f);
        if (lit > barCount)
            lit = barCount;
        for (int i = 0; i < lit; ++i)
        {
            int x = barXStart + i * barStep;
            display.fillRect(x, 37, barWidth, barHeight, 1);
        }

        display.display();
    }

    void showToastReady()
    {
        display.clearDisplay();

        display.drawBitmap(44, 18, toasterBit, 40, 32, 1);

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setCursor(35, 8);
        display.print(F("YOUR TOAST"));

        display.setCursor(41, 52);
        display.print(F("IS READY"));

        display.display();
    }

    void showPlaceBread(bool showFrozen, float extraPercent)
    {
        display.clearDisplay();

        display.drawBitmap(45, 29, image_download_bits, 38, 32, 1);

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setCursor(32, 5);
        display.print(F("Place Bread"));

        display.setCursor(35, 15);
        display.print(F("in Toaster"));

        display.drawBitmap(87, 30, image_arrow_curved_down_left_bits, 5, 8, 1);

        if (showFrozen)
        {
            const char *label = (extraPercent <= 2.0f) ? "COLD" : "FROZEN";
            display.setCursor(5, 37);
            display.print(label);

            display.setCursor(5, 49);
            display.print(F("+ "));
            display.print(extraPercent, 1);
            display.print(F("%"));

            display.drawRect(2, 46, 41, 13, 1);
        }

        display.display();
    }

    void showCalibrating(float weightG)
    {
        display.clearDisplay();

        display.drawBitmap(45, 18, image_OLED_Screens__Smart_Toaster__10__bits, 38, 32, 1);

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setCursor(23, 6);
        display.print(F("Calibrating..."));

        display.setCursor(6, 54);
        display.print(F("Added Weight:"));

        display.setCursor(93, 54);
        display.printf("%.1fg", weightG);

        display.display();
    }

    void showYesNo(int yesOrNoIndex,
                   const __FlashStringHelper *question)
    {
        yesOrNoIndex = clampIndex(yesOrNoIndex, 1);

        display.clearDisplay();

        display.drawBitmap(15, 27, barGraphBit, 98, 31, 1);

        display.setTextColor(1);
        display.setTextWrap(false);
        display.setCursor(11, 5);
        display.print(F("Is the Temperature"));
        display.setCursor(6, 22);
        display.print(F(""));
        display.setCursor(35, 16);
        display.print(F("Jig Setup?"));

        display.setCursor(33, 38);
        display.print(F("YES"));

        display.setCursor(80, 38);
        display.print(F("NO"));

        display.drawLine(64, 31, 64, 51, 1);
        display.drawBitmap(yesNoToggleX[yesOrNoIndex], 36, clickIcon, 7, 16, 1);

        display.display();
    }

} // namespace DisplayUI
